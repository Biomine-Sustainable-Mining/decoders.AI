# Milesight AM308L LoRaWAN Decoder

## Device Information
- **Manufacturer**: Milesight
- **Model**: AM308L
- **Type**: Environmental Monitoring Sensor
- **LoRaWAN Version**: 1.0.x
- **Regions**: EU868, US915, AS923, AU915
- **Official Reference**: https://www.milesight.com/iot/product/lorawan-sensor/am319

## Implementation Details
- **Driver Version**: 1.2.0
- **Generated**: 2025-09-02
- **Coverage**: 22/22 uplinks implemented, 8/8 downlinks implemented
- **Framework**: v2.5.0
- **Template**: v2.5.0

## Expected UI Examples

### Example 1: Normal Environmental Data
```
┌─────────────────────────────────────┐
│ 🏠 AM308L-slot2  Milesight AM308L   │
│ 🔋 3.5V 📶 -78dBm ⏱️ 2m ago        │
├─────────────────────────────────────┤
│ 🌡️ 23.1°C 💧 52% 🔵 1013hPa 💡 8   │
│ 💨 542ppm 🌬️ 0.75 IAQ             │
│ 🌫️ 30μg/m³ 🌫️ 40μg/m³             │
│ 🏠 Idle 💾 v1.2                    │
└─────────────────────────────────────┘
```

### Example 2: Motion Detection with Poor Air Quality
```
┌─────────────────────────────────────┐
│ 🏠 AM308L-slot2  Milesight AM308L   │
│ 🔋 3.2V 📶 -85dBm ⏱️ 1m ago        │
├─────────────────────────────────────┤
│ 🌡️ 28.5°C 💧 68% 🔵 1008hPa 💡 6   │
│ 💨 1250ppm 🌬️ 3.2 IAQ             │
│ 🌫️ 85μg/m³ 🌫️ 120μg/m³            │
│ 🚶 Motion 🔔 Buzzer ON             │
└─────────────────────────────────────┘
```

### Example 3: Historical Data Mode
```
┌─────────────────────────────────────┐
│ 🏠 AM308L-slot2  Milesight AM308L   │
│ 🔋 3.6V 📶 -72dBm ⏱️ 5m ago        │
├─────────────────────────────────────┤
│ 🌡️ 25.2°C 💧 48% 🔵 1015hPa 💡 9   │
│ 💨 425ppm 🌬️ 0.52 IAQ             │
│ 🌫️ 20μg/m³ 🌫️ 32μg/m³             │
│ 🏠 Idle 📊 Hist:IAQ                │
└─────────────────────────────────────┘
```

## Command Reference

### Test Commands (slot = driver slot 1-16):
| Command | Description | Usage | Example |
|---------|-------------|-------|---------|
| LwAM308LTestUI<slot> | UI scenarios | `<scenario>` | `LwAM308LTestUI2 normal` |

### Control Commands (slot = driver slot 1-16):
| Command | Description | Usage | Downlink Hex |
|---------|-------------|-------|---------------|
| LwAM308LReboot<slot> | Device reboot | (no params) | `FF10FF` |
| LwAM308LBuzzer<slot> | Buzzer control | `on/off/stop` | `FF3E01/FF3D00` |
| LwAM308LInterval<slot> | Report interval | `<seconds>` | `FF03XXXX` |
| LwAM308LTimeSync<slot> | Time sync | `enable/disable` | `FF3B02/FF3B00` |
| LwAM308LTimeZone<slot> | Time zone | `<±hours*10>` | `FF17XXXX` |
| LwAM308LTVOCUnit<slot> | TVOC unit | `iaq/ugm3` | `FFEB00/FFEB01` |
| LwAM308LCO2Cal<slot> | CO2 calibration | `factory/abc/manual,<ppm>` | `FF1AXX[XXXX]` |
| LwAM308LHistory<slot> | History control | `enable/disable/clear` | `FF6801/FF6800/FF2701` |

## Usage Examples

### Driver in Slot 2:
```bash
# Test scenarios
LwAM308LTestUI2 normal      # Normal environmental data
LwAM308LTestUI2 motion      # Motion detected
LwAM308LTestUI2 poor        # Poor air quality
LwAM308LTestUI2 history_iaq # Historical IAQ data

# Control commands
LwAM308LInterval2 300       # 5-minute reporting
LwAM308LBuzzer2 on         # Enable buzzer
LwAM308LTimeZone2 20       # UTC+2 timezone
LwAM308LTVOCUnit2 iaq      # TVOC in IAQ units
LwAM308LCO2Cal2 abc        # ABC calibration
LwAM308LHistory2 enable    # Enable history logging
```

## Uplink Coverage Matrix
| Channel | Type | Description | Status | Notes |
|---------|------|-------------|--------|-------|
| 0x01 | 0x75 | Battery | ✅ Implemented | Percentage |
| 0x03 | 0x67 | Temperature | ✅ Implemented | ±0.1°C |
| 0x04 | 0x68 | Humidity | ✅ Implemented | ±0.5% RH |
| 0x05 | 0x00 | PIR Motion | ✅ Implemented | Trigger/Idle |
| 0x06 | 0xCB | Light Level | ✅ Implemented | 0-255 level |
| 0x07 | 0x7D | CO2 | ✅ Implemented | NDIR sensor |
| 0x08 | 0x7D/0xE6 | TVOC | ✅ Implemented | IAQ/µg/m³ |
| 0x09 | 0x73 | Pressure | ✅ Implemented | hPa |
| 0x0B | 0x7D | PM2.5 | ✅ Implemented | µg/m³ |
| 0x0C | 0x7D | PM10 | ✅ Implemented | µg/m³ |
| 0x0E | 0x01 | Buzzer Status | ✅ Implemented | On/Off |
| 0xFF | Various | Device Info | ✅ Implemented | 8 info types |
| 0x20 | 0xCE | History IAQ | ✅ Implemented | 20-byte format |
| 0x21 | 0xCE | History µg/m³ | ✅ Implemented | 20-byte format |

## Special Features
- **Dual TVOC Units**: IAQ index and µg/m³ concentration
- **History Data**: Timestamped historical readings
- **CO2 Calibration**: Multiple calibration modes (ABC, manual, factory)
- **Device Info**: Complete version and configuration data
- **Reset Detection**: Power-on and reset event tracking
- **Time Management**: Timezone and sync configuration

## Decoded Parameters
| Parameter | Unit | Range | Notes |
|-----------|------|-------|-------|
| battery_pct | % | 0 to 100 | Battery percentage |
| temperature | °C | -40 to 125 | ±0.1°C accuracy |
| humidity | %RH | 0 to 100 | ±0.5% accuracy |
| pir_motion | boolean | - | Motion detection |
| light_level | level | 0 to 255 | Light intensity |
| co2_ppm | ppm | 400 to 5000 | NDIR CO2 sensor |
| tvoc_iaq | IAQ | 0 to 500 | Air quality index |
| tvoc_ugm3 | µg/m³ | 0 to 65000 | Concentration |
| pressure_hpa | hPa | 300 to 1100 | Barometric |
| pm25_ugm3 | µg/m³ | 0 to 1000 | Fine particles |
| pm10_ugm3 | µg/m³ | 0 to 1000 | Coarse particles |
| firmware_version | string | - | Device firmware |
| serial_number | string | - | 8-byte hex serial |

## Changelog
```
- v1.2.0 (2025-09-02): Template v2.5.0 upgrade with TestUI payload verification
- v1.1.0 (2025-09-02): Framework v2.4.1 upgrade with critical Berry keys() fixes
- v1.0.0 (2025-08-26): Initial generation from repository specifications
```