# Milesight AM300 LoRaWAN Decoder

## Device Information
- **Manufacturer**: Milesight
- **Model**: AM300 Series (AM300/AM307/AM308/AM319)
- **Type**: Indoor Air Quality Monitor
- **LoRaWAN Version**: 1.0.3
- **Regions**: EU868, US915, AS923, AU915, IN865, RU864, KR920
- **Official Reference**: https://www.milesight-iot.com/lorawan/sensor/am300/

## Implementation Details
- **Driver Version**: 1.4.0
- **Generated**: 2025-09-02
- **Coverage**: 20/20 uplinks implemented, 5/5 downlinks implemented
- **Framework**: v2.5.0
- **Template**: v2.5.0

## Expected UI Examples

### Example 1: Normal Air Quality
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  AM300-slot2  Milesight AM300     â”‚
â”‚ ğŸ”‹ 3.8V ğŸ“¶ -75dBm â±ï¸ 2m ago        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ¡ï¸ 23.2Â°C ğŸ’§ 45% ğŸ”µ 1013hPa ğŸ’¡ 7/10â”‚
â”‚ ğŸ’¨ 420ppm ğŸŒ¬ï¸ 0.7 âš ï¸ 0.06mg/mÂ³     â”‚
â”‚ ğŸŒ«ï¸ 15Î¼g/mÂ³ ğŸŒ«ï¸ 22Î¼g/mÂ³ ğŸŒŠ 0.005ppm  â”‚
â”‚ ğŸ  Vacant ğŸŸ¢ Excellent âœ… WELL OK   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 2: Occupied with Poor Air Quality
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  AM300-slot2  Milesight AM300     â”‚
â”‚ ğŸ”‹ 3.6V ğŸ“¶ -82dBm â±ï¸ 1m ago        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ¡ï¸ 26.5Â°C ğŸ’§ 65% ğŸ”µ 1008hPa ğŸ’¡ 8/10â”‚
â”‚ ğŸ’¨ 1200ppm ğŸŒ¬ï¸ 3.5 âš ï¸ 0.18mg/mÂ³    â”‚
â”‚ ğŸŒ«ï¸ 85Î¼g/mÂ³ ğŸŒ«ï¸ 120Î¼g/mÂ³ ğŸŒŠ 0.025ppm â”‚
â”‚ ğŸš¶ Occupied ğŸ”´ Poor âŒ WELL Alert   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 3: Alert with Buzzer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  AM300-slot2  Milesight AM300     â”‚
â”‚ ğŸ”‹ 3.4V ğŸ“¶ -88dBm â±ï¸ 30s ago       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ¡ï¸ 28.8Â°C ğŸ’§ 75% ğŸ”µ 995hPa ğŸ’¡ 9/10 â”‚
â”‚ ğŸ’¨ 1800ppm ğŸŒ¬ï¸ 4.8 âš ï¸ 0.32mg/mÂ³    â”‚
â”‚ ğŸŒ«ï¸ 150Î¼g/mÂ³ ğŸŒ«ï¸ 180Î¼g/mÂ³ ğŸŒŠ 0.045ppmâ”‚
â”‚ ğŸš¶ Occupied ğŸš¨ Unhealthy ğŸ”” Buzzer ONâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Command Reference

### Test Commands (slot = driver slot 1-16):
| Command | Description | Usage | Example |
|---------|-------------|-------|---------|
| LwAM300TestUI<slot> | UI scenarios | `<scenario>` | `LwAM300TestUI2 normal` |

### Control Commands (slot = driver slot 1-16):
| Command | Description | Usage | Downlink Hex |
|---------|-------------|-------|---------------|
| LwAM300Interval<slot> | Set interval | `<minutes>` | `FF01XXXX` |
| LwAM300Buzzer<slot> | Buzzer control | `on/off` | `FF0EXX` |
| LwAM300Screen<slot> | Screen control | `on/off` | `FF2DXX` |
| LwAM300TimeSync<slot> | Sync time | (no params) | `FF02XXXXXXXX` |
| LwAM300Reboot<slot> | Device reboot | (no params) | `FF10` |

## Usage Examples

### Driver in Slot 2:
```bash
# Test realistic scenarios 
LwAM300TestUI2 normal      # Normal air quality
LwAM300TestUI2 occupied    # Occupied space
LwAM300TestUI2 poor        # Poor air quality
LwAM300TestUI2 excellent   # Excellent conditions
LwAM300TestUI2 alert       # Alert conditions

# Control device
LwAM300Interval2 20        # Set 20-minute reporting
LwAM300Buzzer2 on          # Enable buzzer alarms
LwAM300Screen2 off         # Turn off e-ink display
LwAM300TimeSync2           # Sync device time
LwAM300Reboot2             # Restart device
```

## Uplink Coverage Matrix
| Channel | Type | Description | Status | Notes |
|---------|------|-------------|--------|-------|
| 0x01 | 0x75 | Battery | âœ… Implemented | Percentage |
| 0x03 | 0x67 | Temperature | âœ… Implemented | Â±0.1Â°C |
| 0x04 | 0x68 | Humidity | âœ… Implemented | Â±2% RH |
| 0x05 | 0x02 | PIR Motion | âœ… Implemented | Occupied/Vacant |
| 0x06 | 0xCB/0x10 | Light Level | âœ… Implemented | 0-10 scale |
| 0x07 | 0x7D | CO2 | âœ… Implemented | 400-5000ppm |
| 0x08 | 0x7D/0xE6 | TVOC | âœ… Implemented | Level/PPB |
| 0x09 | 0x73 | Pressure | âœ… Implemented | hPa |
| 0x0A | 0x7D | HCHO | âœ… Implemented | mg/mÂ³ |
| 0x0B | 0x7D | PM2.5 | âœ… Implemented | Î¼g/mÂ³ |
| 0x0C | 0x7D | PM10 | âœ… Implemented | Î¼g/mÂ³ |
| 0x0D | 0x7D | O3 | âœ… Implemented | ppm |
| 0x0E | 0x01 | Buzzer Status | âœ… Implemented | On/Off |
| 0x0F | 0x01 | Activity Event | âœ… Implemented | Movement |
| 0x10 | 0x01 | Power Event | âœ… Implemented | Power-on |
| 0xFF | 0x0B | Device Info | âœ… Implemented | Config response |

## Decoded Parameters
| Parameter | Unit | Range | Notes |
|-----------|------|-------|-------|
| battery_pct | % | 0 to 100 | Battery percentage |
| temperature | Â°C | -40 to 85 | Â±0.1Â°C accuracy |
| humidity | %RH | 0 to 100 | Â±2% accuracy |
| pir_occupancy | boolean | - | Motion detection |
| light_level | level | 0 to 10 | Illumination scale |
| co2_ppm | ppm | 400 to 5000 | NDIR sensor |
| tvoc_level | IAQ | 0 to 5 | Air quality index |
| tvoc_ppb | ppb | 0 to 65000 | Concentration |
| pressure_hpa | hPa | 300 to 1100 | Barometric |
| hcho_mgm3 | mg/mÂ³ | 0 to 6 | Formaldehyde |
| pm25_ugm3 | Î¼g/mÂ³ | 0 to 1000 | Fine particles |
| pm10_ugm3 | Î¼g/mÂ³ | 0 to 1000 | Coarse particles |
| o3_ppm | ppm | 0 to 10 | Ozone |
| air_quality_status | string | - | Calculated status |
| well_status | boolean | - | WELL compliance |

## Air Quality Features
- **Smart Status**: Calculated from CO2, TVOC, and PM2.5 levels
- **WELL Compliance**: Building standard verification
- **9-in-1 Sensors**: Complete environmental monitoring
- **E-ink Display**: Real-time air quality visualization
- **Threshold Alarms**: Configurable via downlinks
- **Data Logging**: Historical data with retransmission

## Changelog
```
- v1.4.0 (2025-09-02): Template v2.5.0 upgrade with TestUI payload verification
- v1.3.0 (2025-09-02): Framework v2.4.1 upgrade with critical Berry keys() fixes
- v1.2.0 (2025-08-26): Enhanced display with air quality status
- v1.1.0 (2025-08-20): Added multi-sensor support and WELL features
- v1.0.0 (2025-08-14): Initial generation from MAP specification
```